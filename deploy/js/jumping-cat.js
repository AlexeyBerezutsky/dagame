Jumping catvar Boot=function(){return function(a){this.init=function(){a.input.maxPointers=1,a.stage.disableVisibilityChange=!0,a.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,a.scale.windowConstraints.bottom="visual",a.scale.pageAlignHorizontally=!0,a.scale.pageAlignVertically=!0,a.device.desktop||(a.scale.setMinMax(480,260,1024,768),a.scale.forceLandscape=!0,a.scale.pageAlignHorizontally=!0)},this.preload=function(){a.load.image("tile","img/tile.png"),a.load.spritesheet("baddie","img/baddie.png",32,32,4)},this.create=function(){a.state.start("Game")}}}(),Game=function(){return function(a){function b(){var b=a.input.gamepad.pad1,c=b.getButton(Phaser.Gamepad.XBOX360_RIGHT_TRIGGER);c.onFloat.add(p)}var c,d,e,f,g,h,i,j,k;this.init=function(){c=a.cache.getImage("tile").width,d=a.cache.getImage("tile").height,a.stage.backgroundColor="479cde",a.physics.startSystem(Phaser.Physics.ARCADE)};var l=function(){for(var b=a.world.height-d,c=d,f=b;f>c-d;f-=e)m(f)},m=function(b){"undefined"==typeof b&&(b=-d,r());for(var e=Math.ceil(a.world.width/c),f=Math.floor(Math.random()*(e-3))+1,g=0;g<e;g++)g!=f&&g!=f+1&&n(g*c,b)},n=function(a,b){var c=g.getFirstDead();c.reset(a,b),c.body.velocity.y=150,c.body.immovable=!0,c.checkWorldBounds=!0,c.outOfBoundsKill=!0},o=function(){f=a.add.sprite(a.world.centerX,a.world.height-(2*e+3*d),"baddie"),f.scale.set(2),f.smoothed=!0,f.anchor.setTo(.5,1),a.physics.arcade.enable(f),f.body.gravity.y=2e3,f.body.collideWorldBounds=!0,f.body.bounce.y=.1,f.animations.add("left",[0,1],10,!0),f.animations.add("right",[2,3],10,!0),f.body.bounce.set(.4)},p=function(a,b){console.log(b),f.body.wasTouching.down&&(f.body.velocity.y=2e3*-b)},q=function(){var b="100px Arial";k=a.add.text(a.world.centerX,100,"0",{font:b,fill:"#fff"}),k.anchor.setTo(.5,.5),k.align="center"},r=function(){j+=1,k.text=j};this.create=function(){g=a.add.group(),g.enableBody=!0,g.createMultiple(250,"tile"),e=200,l(),o(),j=0,q(),a.input.gamepad.start(),i=a.input.gamepad.pad1,i.addCallbacks(this,{onConnect:b}),h=a.input.keyboard.createCursorKeys();a.time.events.loop(2e3,m,this)};var s=function(){a.state.start("Game")},t=!1;this.update=function(){a.physics.arcade.collide(f,g),f.body.position.y>=a.world.height-f.body.height&&s(),h&&(h.up.isDown&&f.body.wasTouching.down&&(f.body.velocity.y=-1400),h.left.isDown?f.body.velocity.x+=-50:h.right.isDown?f.body.velocity.x+=50:t=!1),a.input.gamepad.supported&&a.input.gamepad.active&&a.input.gamepad.pad1.connected&&(i.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_X)<-.1?f.body.velocity.x+=10*i.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_X):i.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_X)>.1&&(f.body.velocity.x+=10*i.axis(Phaser.Gamepad.XBOX360_STICK_LEFT_X))),f.body.velocity.x>.1?(f.animations.play("right"),f.body.velocity.x-=1):f.body.velocity.x<-.1?(f.body.velocity.x+=1,f.animations.play("left")):f.animations.stop()}}}();